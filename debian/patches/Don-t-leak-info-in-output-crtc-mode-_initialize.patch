From: Sam Morris <sam@robots.org.uk>
Date: Mon, 16 Jul 2018 11:41:46 +0100
Subject: Don't leak info in {output,crtc,mode}_initialize

Bug: https://gitlab.gnome.org/GNOME/gnome-desktop/issues/6
Bug-Debian: https://bugs.debian.org/cgi-bin/bugreport.cgi?bug=903901
Forwarded: https://gitlab.gnome.org/GNOME/gnome-desktop/merge_requests/1
(cherry picked from commit c7c6f7369fb32c1892ee4f3f93e0d32678218406)
---
 libgnome-desktop/gnome-rr.c | 3 +++
 1 file changed, 3 insertions(+)

diff --git a/libgnome-desktop/gnome-rr.c b/libgnome-desktop/gnome-rr.c
index 974d79e..01afeba 100644
--- a/libgnome-desktop/gnome-rr.c
+++ b/libgnome-desktop/gnome-rr.c
@@ -1340,6 +1340,7 @@ output_initialize (GnomeRROutput *output, GVariant *info)
 		   &current_crtc_id, &crtcs,
 		   &output->name,
 		   &modes, &clones, &properties);
+    g_variant_unref (info);
 
     /* Possible crtcs */
     a = g_ptr_array_new ();
@@ -1990,6 +1991,7 @@ crtc_initialize (GnomeRRCrtc *crtc, GVariant *info)
 		   &current_mode_id,
 		   &crtc->transform, &all_transforms,
 		   NULL);
+    g_variant_unref (info);
 
     if (current_mode_id >= 0)
       crtc->current_mode = mode_by_id (crtc->info, current_mode_id);
@@ -2084,6 +2086,7 @@ mode_initialize (GnomeRRMode *mode, GVariant *info)
 		   &mode->id, &mode->winsys_id,
 		   &mode->width, &mode->height,
 		   &frequency, &mode->flags);
+    g_variant_unref (info);
     
     mode->freq = frequency * 1000;
 }
